/* Fonts - must be first */
@import url('https://api.fontshare.com/v2/css?f[]=gambetta@400,500,600,700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');

/* Tailwind v4 */
@import "tailwindcss";
@config "../../tailwind.config.mjs";

/* @link https://utopia.fyi/space/calculator?c=320,18,1.2,1240,20,1.25,5,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 */

html {
  scrollbar-gutter: stable both-edges;
}

:root {
  --space-3xs: clamp(0.3125rem, 0.3125rem + 0vw, 0.3125rem);
  --space-2xs: clamp(0.5625rem, 0.5408rem + 0.1087vw, 0.625rem);
  --space-xs: clamp(0.875rem, 0.8533rem + 0.1087vw, 0.9375rem);
  --space-s: clamp(1.125rem, 1.0815rem + 0.2174vw, 1.25rem);
  --space-m: clamp(1.6875rem, 1.6223rem + 0.3261vw, 1.875rem);
  --space-l: clamp(2.25rem, 2.163rem + 0.4348vw, 2.5rem);
  --space-xl: clamp(3.375rem, 3.2446rem + 0.6522vw, 3.75rem);
  --space-2xl: clamp(4.5rem, 4.3261rem + 0.8696vw, 5rem);
  --space-3xl: clamp(6.75rem, 6.4891rem + 1.3043vw, 7.5rem);

  /* One-up pairs */
  --space-3xs-2xs: clamp(0.3125rem, 0.2038rem + 0.5435vw, 0.625rem);
  --space-2xs-xs: clamp(0.5625rem, 0.4321rem + 0.6522vw, 0.9375rem);
  --space-xs-s: clamp(0.875rem, 0.7446rem + 0.6522vw, 1.25rem);
  --space-s-m: clamp(1.125rem, 0.8641rem + 1.3043vw, 1.875rem);
  --space-m-l: clamp(1.6875rem, 1.4049rem + 1.413vw, 2.5rem);
  --space-l-xl: clamp(2.25rem, 1.7283rem + 2.6087vw, 3.75rem);
  --space-xl-2xl: clamp(3.375rem, 2.8098rem + 2.8261vw, 5rem);
  --space-2xl-3xl: clamp(4.5rem, 3.4565rem + 5.2174vw, 7.5rem);

  /* Custom pairs */
  --space-s-l: clamp(1.125rem, 0.6467rem + 2.3913vw, 2.5rem);

  --step--2: clamp(0.7813rem, 0.7747rem + 0.0326vw, 0.8rem);
  --step--1: clamp(0.9375rem, 0.9158rem + 0.1087vw, 1rem);
  --step-0: clamp(1.125rem, 1.0815rem + 0.2174vw, 1.25rem);
  --step-1: clamp(1.35rem, 1.2761rem + 0.3696vw, 1.5625rem);
  --step-2: clamp(1.62rem, 1.5041rem + 0.5793vw, 1.9531rem);
  --step-3: clamp(1.944rem, 1.771rem + 0.8651vw, 2.4414rem);
  --step-4: clamp(2.3328rem, 2.0827rem + 1.2504vw, 3.0518rem);
  --step-5: clamp(2.7994rem, 2.4462rem + 1.7658vw, 3.8147rem);

  /* Colors as CSS vars for animations */
  --color-void: #140314;
  --color-shadow: #330333;
  --color-wine: #8E2E50;
  --color-ember: #C65842;
  --color-flame: #FF931E;
}

@layer base {
  body {
    @apply font-body bg-void text-light;
    font-size: var(--step--1);
  }

  h1 {
    font-size: var(--step-5);
  }

  h2 {
    font-size: var(--step-4);
  }

  h3 {
    font-size: var(--step-3);
  }

  h4 {
    font-size: var(--step-2);
  }

  h5 {
    font-size: var(--step-1);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-header font-semibold;
  }

  a {
    @apply text-ember no-underline transition-colors duration-200;
  }

  a:hover {
    @apply text-flame;
  }

  /* Atmospheric background with gradient vignette and subtle grid */
  .grain {
    position: relative;
    background:
      /* Radial vignette from center */
      radial-gradient(
        ellipse 80% 60% at 50% 40%,
        rgba(51, 3, 51, 0.4) 0%,
        transparent 70%
      ),
      /* Subtle warm glow at bottom */
      radial-gradient(
        ellipse 100% 40% at 50% 100%,
        rgba(198, 88, 66, 0.08) 0%,
        transparent 60%
      ),
      var(--color-void);
  }

  .grain::before {
    content: "";
    position: absolute;
    inset: 0;
    /* Grid pattern */
    background-image:
      linear-gradient(rgba(255, 255, 255, 0.06) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 255, 255, 0.06) 1px, transparent 1px);
    background-size: 60px 60px;
    pointer-events: none;
    z-index: 1;
  }

  .grain::after {
    content: "";
    position: absolute;
    inset: 0;
    /* Very subtle noise texture */
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.02;
    pointer-events: none;
    z-index: 1;
  }

  /* Glow animation for logo */
  @keyframes glow-pulse {
    0%, 100% {
      filter: drop-shadow(0 0 20px rgba(198, 88, 66, 0.3));
    }
    50% {
      filter: drop-shadow(0 0 40px rgba(198, 88, 66, 0.5));
    }
  }

  .glow-animate {
    animation: glow-pulse 4s ease-in-out infinite;
  }

  /* Gradient text */
  .text-gradient {
    background: linear-gradient(135deg, var(--color-ember) 0%, var(--color-flame) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Card glass effect */
  .glass-card {
    @apply bg-shadow/50 backdrop-blur-sm border border-light/10 rounded-lg;
    transition: all 0.3s ease;
  }

  .glass-card:hover {
    @apply border-ember/30 shadow-glow-ember-sm;
  }

  .prose {
    --flow-space: var(--space-m-l);
    line-height: 1.8;
  }

  .prose > * + * {
    margin-top: var(--flow-space);
  }
}
